import{a as i}from"./chunk-SAYYBWUX.mjs";import{z as e}from"zod";async function g(c){c.withTypeProvider().get("/events/:eventId/attendees",{schema:{summary:"Get event attendees",tags:["events"],params:e.object({eventId:e.string().uuid()}),querystring:e.object({query:e.string().nullish(),pageIndex:e.string().nullable().default("0").transform(Number)}),response:{200:e.object({attendees:e.array(e.object({id:e.number().int(),name:e.string(),email:e.string(),createdAt:e.date(),checkIn:e.date().nullable()}))}),404:e.object({message:e.string()}),500:e.object({message:e.string()})}}},async(s,n)=>{let{eventId:d}=s.params,{pageIndex:o,query:r}=s.query,a=await i.attendee.findMany({select:{id:!0,name:!0,email:!0,createdAt:!0,checkIn:{select:{createdAt:!0}}},where:r?{eventId:d,name:{contains:r}}:{eventId:d},take:10,skip:o*10,orderBy:{createdAt:"desc"}});return a.length?r&&!a.length?n.send({message:"No attendees found."}):n.send({attendees:a.map(t=>({id:t.id,name:t.name,email:t.email,createdAt:t.createdAt,checkIn:t.checkIn?.createdAt||null}))}):n.send({message:"No attendees found."})})}export{g as a};
